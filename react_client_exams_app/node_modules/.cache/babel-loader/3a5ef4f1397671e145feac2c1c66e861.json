{"ast":null,"code":"import _slicedToArray from\"C:/Users/ofeki/OneDrive/\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4/ExamApp design ver/ExamsApp/react_client_exams_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useHistory,useLocation}from'react-router-dom';import{TagsInput}from'../../../../../Admin/TagsInput/TagsInput';import styles from'./CreateEditQuestion.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function CreateEditQuestion(){// ------------------------ Fetch Info Hooks -----------------------\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),questionTypes=_useState2[0],setQuestionTypes=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),questions=_useState4[0],setQuestions=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),question=_useState6[0],setQuestion=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),field=_useState8[0],setField=_useState8[1];// ------------------------- Content Hooks -------------------------\n// *Question Table*\nvar _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),questionID=_useState10[0],setQuestionID=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),questionType=_useState12[0],setQuestionType=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),questionTitle=_useState14[0],setQuestionTitle=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),questionText=_useState16[0],setQuestionText=_useState16[1];var _useState17=useState(\"low\"),_useState18=_slicedToArray(_useState17,2),difficulty=_useState18[0],setDifficulty=_useState18[1];// *Answers Table*\nvar _useState19=useState(question?question.answers:[{\"answerID\":0,\"answerTitle\":\"\",\"correct\":true},{\"answerID\":1,\"answerTitle\":\"\",\"correct\":false},{\"answerID\":2,\"answerTitle\":\"\",\"correct\":false}]),_useState20=_slicedToArray(_useState19,2),answers=_useState20[0],setAnswers=_useState20[1];var _useState21=useState(answers?answers[answers.length-1].answerID+1:0),_useState22=_slicedToArray(_useState21,2),answerID=_useState22[0],setAnswerID=_useState22[1];var _useState23=useState(\"vertical\"),_useState24=_slicedToArray(_useState23,2),answersLayout=_useState24[0],setAnswersLayout=_useState24[1];// *Tags Table* \nvar _useState25=useState(question?question.tags:\"\"),_useState26=_slicedToArray(_useState25,2),tags=_useState26[0],setTags=_useState26[1];// -----------------------------------------------------------------\nvar initialState=function initialState(){console.log(\"returning to initial state\");setQuestionType(questionTypes?questionTypes[0]:\"\");setQuestionTitle(\"\");setQuestionText(\"\");setQuestionID(questionID+1);setAnswers([{\"answerID\":0,\"answerTitle\":\"\",\"correct\":true},{\"answerID\":1,\"answerTitle\":\"\",\"correct\":false},{\"answerID\":2,\"answerTitle\":\"\",\"correct\":false}]);setAnswerID(answers?answers[answers.length-1].answerID+1:0);setTags(\"\");setAnswersLayout(\"vertical\");};var addAnswer=function addAnswer(event){console.log(\"add answer\");event.preventDefault();var newPossibleAnswers=answers;newPossibleAnswers.push({\"answerID\":answers[answers.length-1].answerID+1,\"answerTitle\":\"\",correct:false});setAnswers(newPossibleAnswers);setAnswerID(answers[answers.length-1].answerID+1);};var removeAnswer=function removeAnswer(event,id){event.preventDefault();console.log(\"remove answer id \"+id);setAnswers(answers.filter(function(answer){return answer.answerID!==id;}));};var location=useLocation();var history=useHistory();var back=function back(){history.goBack();};var show=function show(){};var handleTagsChange=function handleTagsChange(newTags){console.log(newTags);setTags(newTags);};var handlePossibleAnswersChange=function handlePossibleAnswersChange(){// console.log(\"possible answers changed\")\nvar correctAnswer_Counter=0;answers&&answers.map(function(answer){var radio=document.getElementById(\"radio_\".concat(answer.answerID));radio.checked=answer.correct;if(answer.correct===true){correctAnswer_Counter++;}});if(questionTypes){if(correctAnswer_Counter===0){// console.log(\"0 correct answers\")\n}else if(correctAnswer_Counter===1){setQuestionType(questionTypes[0].typeName);// console.log(\"1 correct answers\")\n}else{setQuestionType(questionTypes[1].typeName);// console.log(\"2+ correct answers\")\n}}};var handleAnswerClick=function handleAnswerClick(id){console.log(\"handle answer click\");var newAnswers=answers;var amountCorrect=newAnswers.filter(function(answer){return answer.correct===true;});newAnswers.filter(function(answer){return answer.answerID===id;}).map(function(answer){if(amountCorrect.length<=1){if(answer.correct===false)answer.correct=true;}else if(amountCorrect.length>1&&amountCorrect.length<newAnswers.length-1){answer.correct=!answer.correct;console.log(\"answer_\".concat(id,\" state - \").concat(answer.correct));}else{if(answer.correct===true)answer.correct=false;}return answer;});setAnswers(newAnswers);handlePossibleAnswersChange();};var handleLayoutChange=function handleLayoutChange(e){if(e.target.checked===true){setAnswersLayout(e.target.id);}};var handleAnswerChanged=function handleAnswerChanged(id,a){console.log(\"handle answer changed\");var newPossibleAnswers=answers;newPossibleAnswers.filter(function(answer){return answer.answerID===id;}).map(function(answer){answer.answerTitle=a;return answer;});setAnswers(newPossibleAnswers);};var handleSubmit=function handleSubmit(event){console.log(\"handle submit\");event.preventDefault();saveQuestion();};var saveQuestion=function saveQuestion(){console.log(questionID);fetch('http://localhost:8000/questions',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:questionID,tags:tags,last_update:Date.now,type:questionType,title:questionTitle,text:questionText,difficulty:difficulty,answers:answers,answersLayout:answersLayout})}).then(function(res){return res.json();}).then(function(data){console.log(data);initialState();}).catch(function(err){return console.log(\"error \".concat(err));});};var caseEditQuestion=function caseEditQuestion(){var editQuestion=location.state.question;setQuestionID(editQuestion.questionID);console.log(\"Current questionID: \".concat(editQuestion.questionID));setQuestionType(editQuestion.questionType);setQuestionTitle(editQuestion.questionHeader);setQuestionText(editQuestion.questionText);setAnswers(editQuestion.answers);setAnswerID(editQuestion.answers[editQuestion.answers.length-1].answerID+1);setAnswersLayout(editQuestion.answersLayout);setTags(editQuestion.tags);};var fetchQuestions=function fetchQuestions(){fetch(\"http://localhost:8000/questions\",{method:'GET'}).then(function(res){return res.json();}).then(function(data){setQuestions(data);// Edit question\nif(location.state&&location.state.question)caseEditQuestion();else{setQuestionID(data&&data[data.length-1].questionID+1);console.log(\"Current questionID: \".concat(data[data.length-1].questionID+1));}}).catch(function(err){return console.log('error fetching questions:'+err);});};var fetchQuestionTypes=function fetchQuestionTypes(){fetch(\"http://localhost:8000/questionTypes\",{method:'GET'}).then(function(res){return res.json();}).then(function(data){setQuestionTypes(data);setQuestionType(questionType?questionType:data[0].typeName);}).catch(function(err){return console.log('error fetching question types:'+err);});};// Meant to set the type according to the amount of the correct answers\nuseEffect(function(){handlePossibleAnswersChange();},[answers]);// Meant for setting the title of the document on the first render\nuseEffect(function(){if(location.state&&location.state.question)setQuestion(location.state.question);document.title=\"\".concat(location.state.question===null?\"Create\":\"Edit\",\" Question\");if(location.state){if(location.state.field)setField(location.state.field);}},[location]);// Meant for fetching the necessary information on first render\nuseEffect(function(){var isMounted=true;// note mutable flag\nif(isMounted){// add conditional check\nfetchQuestions();fetchQuestionTypes();}// Event listener for enter key press inside form's inputs\n// const listener = event => {\n//   if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\n//     console.log(\"Enter key was pressed. Run your function.\");\n//     handleSubmit(event);\n//   }\n// };\n// document.addEventListener(\"keydown\", listener);\n// Prevent form submission on enter key press inside inputs\nvar listener=function listener(e){if(e.keyIdentifier==='U+000A'||e.keyIdentifier==='Enter'||e.keyCode===13){if(e.target.nodeName==='INPUT'&&e.target.type!=='textarea'){e.preventDefault();return false;}}};document.addEventListener('keydown',listener,true);return function(){document.removeEventListener(\"keydown\",listener);isMounted=false;};// cleanup toggles value, if unmounted\n},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"create_edit_question noselect\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"page__header\",children:[\" \",question===null?\"Create\":\"Edit\",\" Question \"]}),/*#__PURE__*/_jsxs(\"form\",{className:\"new_question__form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"content__section\",children:/*#__PURE__*/_jsx(\"table\",{id:\"question__table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"label\",{children:\" Field: \"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsxs(\"label\",{id:\"field__label\",children:[\" \",field===null?\"undefined\":field,\" \"]}),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"label\",{children:\" Question type: \"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"select\",{id:\"question_type__select\",value:questionType,disabled:true,children:questionTypes&&questionTypes.map(function(questionType){return/*#__PURE__*/_jsxs(\"option\",{value:questionType.typeName,children:[\" \",questionType.typeName,\" \"]},questionType.typeID);})}),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"label\",{children:\" Question header: \"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{className:\"asterisk_input\",value:questionTitle,type:\"text\",placeholder:\"Enter your question here\",onChange:function onChange(e){return setQuestionTitle(e.target.value);},required:true}),\" \"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"label\",{children:\" Question additional information: \"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"input\",{className:\"asterisk_input\",value:questionText,type:\"text\",placeholder:\"Type something\",onChange:function onChange(e){return setQuestionText(e.target.value);},required:true}),\" \"]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"content__section\",children:[/*#__PURE__*/_jsx(\"table\",{id:\"answers__table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:answers&&answers.map(function(answer){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",answer.answerID===0&&/*#__PURE__*/_jsx(\"label\",{children:\" Possible answers: \"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"answer__td\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"\",onClick:function onClick(e){return removeAnswer(e,answer.answerID);},children:\" X \"}),/*#__PURE__*/_jsx(\"input\",{id:\"answer_\".concat(answer.answerID),className:\"asterisk_input\",name:\"answer\",type:\"text\",onChange:function onChange(e){return handleAnswerChanged(answer.answerID,e.target.value);},placeholder:\"Answer #\".concat(answer.answerID),required:true}),/*#__PURE__*/_jsx(\"input\",{id:\"radio_\".concat(answer.answerID),name:questionTypes?questionType===questionTypes[0]?questionType:\"\":\"default\",type:\"radio\",onClick:function onClick(e){return handleAnswerClick(answer.answerID);}}),/*#__PURE__*/_jsxs(\"label\",{id:\"label_\".concat(answer.answerID),htmlFor:\"radio_\".concat(answer.answerID),children:[\"  \",answer.correct===true?\"Correct\":\"Incorrect\",\"  \"]})]})]},answer.answerID);})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"answer_layout__container\",children:[/*#__PURE__*/_jsx(\"label\",{name:\"layout__label\",children:\" Answers layout: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"vertical\",type:\"radio\",name:\"answer_layout\",defaultChecked:true,onChange:function onChange(e){return handleLayoutChange(e);}}),\"    \",/*#__PURE__*/_jsx(\"label\",{htmlFor:\"vertical\",children:\"  Vertical   \"}),/*#__PURE__*/_jsx(\"input\",{id:\"horizontal\",type:\"radio\",name:\"answer_layout\",onChange:function onChange(e){return handleLayoutChange(e);}}),\"    \",/*#__PURE__*/_jsx(\"label\",{htmlFor:\"horizontal\",children:\"  Horizontal \"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return addAnswer(e);},children:\" Add an Answer \"})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"tags__container\",children:/*#__PURE__*/_jsx(\"table\",{id:\"tags__table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(\"label\",{children:\" Tags: \"}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",/*#__PURE__*/_jsx(TagsInput,{tags:handleTagsChange}),\" \"]})]})})})}),/*#__PURE__*/_jsxs(\"div\",{id:\"buttons__container\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"regular__button\",onClick:function onClick(){return back();},children:[\" \",\"<<\",\" Back  \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"regular__button\",onClick:function onClick(){return show();},children:\"  Show         \"}),/*#__PURE__*/_jsxs(\"button\",{className:\"regular__button\",type:\"submit\",children:[\"  Save \",\">>\",\" \"]})]})]})]});};","map":{"version":3,"sources":["C:/Users/ofeki/OneDrive/שולחן העבודה/ExamApp design ver/ExamsApp/react_client_exams_app/src/components/pages/Admin/MainPage/ManageQuestions/CreateEditQuestion/CreateEditQuestion.js"],"names":["React","useState","useEffect","useHistory","useLocation","TagsInput","styles","CreateEditQuestion","questionTypes","setQuestionTypes","questions","setQuestions","question","setQuestion","field","setField","questionID","setQuestionID","questionType","setQuestionType","questionTitle","setQuestionTitle","questionText","setQuestionText","difficulty","setDifficulty","answers","setAnswers","length","answerID","setAnswerID","answersLayout","setAnswersLayout","tags","setTags","initialState","console","log","addAnswer","event","preventDefault","newPossibleAnswers","push","correct","removeAnswer","id","filter","answer","location","history","back","goBack","show","handleTagsChange","newTags","handlePossibleAnswersChange","correctAnswer_Counter","map","radio","document","getElementById","checked","typeName","handleAnswerClick","newAnswers","amountCorrect","handleLayoutChange","e","target","handleAnswerChanged","a","answerTitle","handleSubmit","saveQuestion","fetch","method","headers","body","JSON","stringify","last_update","Date","now","type","title","text","then","res","json","data","catch","err","caseEditQuestion","editQuestion","state","questionHeader","fetchQuestions","fetchQuestionTypes","isMounted","listener","keyIdentifier","keyCode","nodeName","addEventListener","removeEventListener","typeID","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect       }  from 'react';\r\nimport        { useHistory, useLocation   }  from 'react-router-dom';\r\nimport        { TagsInput                 }  from '../../../../../Admin/TagsInput/TagsInput';\r\nimport styles                                from './CreateEditQuestion.css';\r\n\r\n  export default function CreateEditQuestion() {\r\n\r\n  // ------------------------ Fetch Info Hooks -----------------------\r\n\r\n  const [ questionTypes,        setQuestionTypes    ]  = useState(null);\r\n  const [ questions,            setQuestions        ]  = useState(null);\r\n\r\n  const [ question,             setQuestion         ]  = useState(null);\r\n  const [ field,                setField            ]  = useState(null);\r\n\r\n  // ------------------------- Content Hooks -------------------------\r\n\r\n  // *Question Table*\r\n  const [ questionID,           setQuestionID       ]  = useState(0);\r\n  const [ questionType,         setQuestionType     ]  = useState(\"\");\r\n  const [ questionTitle,        setQuestionTitle    ]  = useState(\"\");\r\n  const [ questionText,         setQuestionText     ]  = useState(\"\");\r\n  const [ difficulty,           setDifficulty       ]  = useState(\"low\");\r\n\r\n  // *Answers Table*\r\n  const [ answers,              setAnswers          ]  = useState(\r\n    question ? question.answers : [\r\n      { \"answerID\": 0, \"answerTitle\": \"\", \"correct\": true},\r\n      { \"answerID\": 1, \"answerTitle\": \"\", \"correct\": false},\r\n      { \"answerID\": 2, \"answerTitle\": \"\", \"correct\": false}\r\n    ]\r\n  );\r\n  const [ answerID,             setAnswerID         ]  = useState(answers ? answers[answers.length - 1].answerID + 1 : 0);\r\n  const [ answersLayout,        setAnswersLayout    ]  = useState(\"vertical\");\r\n\r\n  // *Tags Table* \r\n  const [ tags,                 setTags             ]  = useState(question ? question.tags : \"\");\r\n\r\n  // -----------------------------------------------------------------\r\n\r\n  const initialState = () => {\r\n    console.log(\"returning to initial state\");\r\n    setQuestionType(questionTypes ? questionTypes[0] : \"\");\r\n    setQuestionTitle(\"\");\r\n    setQuestionText(\"\");\r\n    setQuestionID(questionID + 1);\r\n\r\n    setAnswers([\r\n      { \"answerID\": 0, \"answerTitle\": \"\", \"correct\": true},\r\n      { \"answerID\": 1, \"answerTitle\": \"\", \"correct\": false},\r\n      { \"answerID\": 2, \"answerTitle\": \"\", \"correct\": false}\r\n    ]);\r\n\r\n    setAnswerID(answers ? answers[answers.length - 1].answerID + 1: 0);\r\n    setTags(\"\");\r\n    setAnswersLayout(\"vertical\");\r\n  }\r\n  \r\n  const addAnswer = (event) => {  \r\n    console.log(\"add answer\");\r\n    event.preventDefault();\r\n    let newPossibleAnswers = answers;\r\n    newPossibleAnswers.push({ \"answerID\": answers[answers.length - 1].answerID + 1, \"answerTitle\": \"\", correct: false });\r\n    setAnswers(newPossibleAnswers);\r\n    setAnswerID(answers[answers.length - 1].answerID + 1);\r\n  }\r\n\r\n  const removeAnswer = (event, id) => { \r\n    event.preventDefault(); \r\n    console.log(\"remove answer id \" + id)\r\n    setAnswers(answers.filter((answer) => answer.answerID !== id));\r\n  }\r\n  \r\n  const location = useLocation();\r\n  const history = useHistory();\r\n\r\n  const back = () => {\r\n      history.goBack();\r\n  }\r\n\r\n  const show = () => {\r\n    \r\n  }\r\n\r\n  const handleTagsChange = newTags => {\r\n    console.log(newTags);\r\n    setTags(newTags);\r\n  }\r\n\r\n  const handlePossibleAnswersChange = () => {\r\n    // console.log(\"possible answers changed\")\r\n    let correctAnswer_Counter = 0;\r\n    (answers && answers.map((answer) => {\r\n      let radio = document.getElementById(`radio_${answer.answerID}`);\r\n      radio.checked = answer.correct;\r\n      if (answer.correct === true) {\r\n        correctAnswer_Counter++;\r\n      }\r\n    }));\r\n\r\n    if (questionTypes) {\r\n      if (correctAnswer_Counter === 0) {\r\n        // console.log(\"0 correct answers\")\r\n      } else if (correctAnswer_Counter === 1) {\r\n        setQuestionType(questionTypes[0].typeName);\r\n        // console.log(\"1 correct answers\")\r\n      } else {\r\n        setQuestionType(questionTypes[1].typeName)\r\n        // console.log(\"2+ correct answers\")\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleAnswerClick = (id) => {\r\n    console.log(\"handle answer click\");\r\n    let newAnswers = answers;\r\n    let amountCorrect = newAnswers.filter((answer) => answer.correct === true)\r\n    newAnswers.filter((answer) => answer.answerID === id).map((answer) => {\r\n\r\n      if (amountCorrect.length <= 1) {\r\n        if (answer.correct === false) answer.correct = true;\r\n      }\r\n\r\n      else if (amountCorrect.length > 1 && amountCorrect.length < newAnswers.length - 1) {\r\n        answer.correct = !answer.correct;\r\n        console.log(`answer_${id} state - ${answer.correct}`);\r\n      }\r\n\r\n      else {\r\n        if (answer.correct === true) answer.correct = false;\r\n      }\r\n\r\n      return answer;\r\n    });\r\n    setAnswers(newAnswers);\r\n    handlePossibleAnswersChange();\r\n  }\r\n\r\n  const handleLayoutChange = (e) => {\r\n    if (e.target.checked === true) {\r\n      setAnswersLayout(e.target.id);\r\n    }\r\n  }\r\n\r\n  const handleAnswerChanged = (id, a) => {\r\n    console.log(\"handle answer changed\");\r\n    let newPossibleAnswers = answers;\r\n    newPossibleAnswers.filter((answer) => answer.answerID === id).map((answer) => {\r\n      answer.answerTitle = a;\r\n      return answer;\r\n    });\r\n    setAnswers(newPossibleAnswers);\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    console.log(\"handle submit\");\r\n    event.preventDefault();\r\n    saveQuestion();\r\n  }\r\n\r\n  const saveQuestion = () => {\r\n    console.log(questionID);\r\n\r\n    fetch('http://localhost:8000/questions', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n        id: questionID,\r\n        tags: tags,\r\n        last_update: Date.now,\r\n        type: questionType,\r\n        title: questionTitle,\r\n        text: questionText,\r\n        difficulty: difficulty,\r\n        answers: answers,\r\n        answersLayout: answersLayout\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((data) => { \r\n        console.log(data); \r\n        initialState(); \r\n      })\r\n      .catch((err) => console.log(`error ${err}`));\r\n  }\r\n\r\n  const caseEditQuestion = () => {\r\n    let editQuestion = location.state.question;\r\n\r\n    setQuestionID(editQuestion.questionID);\r\n    console.log(`Current questionID: ${editQuestion.questionID}`); \r\n    \r\n    setQuestionType(editQuestion.questionType);\r\n    setQuestionTitle(editQuestion.questionHeader);\r\n    setQuestionText(editQuestion.questionText);\r\n    setAnswers(editQuestion.answers);\r\n    setAnswerID(editQuestion.answers[editQuestion.answers.length - 1].answerID + 1);\r\n    setAnswersLayout(editQuestion.answersLayout);\r\n    setTags(editQuestion.tags);\r\n  }\r\n\r\n  const fetchQuestions = () => {\r\n    fetch(\"http://localhost:8000/questions\", {\r\n      method: 'GET',\r\n    })\r\n    .then((res) => res.json())\r\n    .then((data) => { \r\n      setQuestions(data); \r\n\r\n      // Edit question\r\n      if (location.state && location.state.question) caseEditQuestion();\r\n      else {\r\n        setQuestionID( data && data[data.length - 1].questionID + 1);\r\n        console.log(`Current questionID: ${data[data.length - 1].questionID + 1}`); \r\n      }\r\n    })\r\n    .catch((err) => console.log('error fetching questions:' + err));\r\n  }\r\n\r\n  const fetchQuestionTypes = () => {\r\n    fetch(\"http://localhost:8000/questionTypes\", {\r\n      method: 'GET',\r\n    })\r\n    .then((res) => res.json())\r\n    .then((data) => { \r\n      setQuestionTypes(data); \r\n      setQuestionType(questionType ? questionType : data[0].typeName); \r\n    })\r\n    .catch((err) => console.log('error fetching question types:' + err));\r\n  }\r\n\r\n  // Meant to set the type according to the amount of the correct answers\r\n  useEffect(() => {\r\n    handlePossibleAnswersChange();\r\n  }, [answers])\r\n\r\n  // Meant for setting the title of the document on the first render\r\n  useEffect(() => {\r\n    if (location.state && location.state.question) setQuestion(location.state.question);\r\n    document.title = `${location.state.question === null ? \"Create\" : \"Edit\"} Question`;\r\n\r\n    if (location.state) {\r\n      if (location.state.field) setField(location.state.field);\r\n    }\r\n\r\n  }, [location])\r\n\r\n  // Meant for fetching the necessary information on first render\r\n  useEffect(() => {\r\n    let isMounted = true;           // note mutable flag\r\n\r\n    if (isMounted) {                // add conditional check\r\n      fetchQuestions();\r\n      fetchQuestionTypes();\r\n    }\r\n\r\n    // Event listener for enter key press inside form's inputs\r\n    // const listener = event => {\r\n    //   if (event.code === \"Enter\" || event.code === \"NumpadEnter\") {\r\n    //     console.log(\"Enter key was pressed. Run your function.\");\r\n    //     handleSubmit(event);\r\n    //   }\r\n    // };\r\n    // document.addEventListener(\"keydown\", listener);\r\n\r\n    // Prevent form submission on enter key press inside inputs\r\n    const listener = e => {if(e.keyIdentifier==='U+000A'||e.keyIdentifier==='Enter'||e.keyCode===13){if(e.target.nodeName === 'INPUT' && e.target.type !== 'textarea'){e.preventDefault();return false;}}};\r\n    document.addEventListener('keydown', listener, true);\r\n\r\n    return () => { \r\n      document.removeEventListener(\"keydown\", listener);\r\n      isMounted = false\r\n    }; // cleanup toggles value, if unmounted\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"create_edit_question noselect\">\r\n      <h1 className=\"page__header\"> { question === null ? \"Create\" : \"Edit\" } Question </h1>\r\n      <form className=\"new_question__form\" onSubmit={handleSubmit}>\r\n\r\n        <div className=\"content__section\">\r\n          <table id=\"question__table\">\r\n            <tbody>\r\n              <tr>\r\n                <td> <label> Field: </label> </td>\r\n                <td> <label id=\"field__label\"> { field === null ? \"undefined\" : field } </label> </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                  <td> <label> Question type: </label> </td>\r\n                  <td> <select id=\"question_type__select\" value={questionType} disabled>\r\n                          {questionTypes && questionTypes.map((questionType) => (\r\n                            <option key={questionType.typeID} value={questionType.typeName}> {questionType.typeName} </option>\r\n                          ))}\r\n                        </select> </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td> <label> Question header: </label> </td>\r\n                <td> <input className=\"asterisk_input\" value={questionTitle} type=\"text\" placeholder=\"Enter your question here\"  onChange={(e) => setQuestionTitle(e.target.value)} required/> </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <td> <label> Question additional information: </label> </td>\r\n                <td> <input className=\"asterisk_input\" value={questionText}   type=\"text\" placeholder=\"Type something\"            onChange={(e) => setQuestionText(e.target.value)}    required/> </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div className=\"content__section\">\r\n          <table id=\"answers__table\">\r\n            <tbody>\r\n\r\n              {answers && answers.map((answer) => (\r\n              <tr key={answer.answerID}>\r\n                <td> { answer.answerID === 0 && <label> Possible answers: </label> } </td>\r\n                <td className=\"answer__td\"> \r\n                  <button type=\"\" onClick={ (e) => removeAnswer(e, answer.answerID) }> X </button>\r\n                  <input id={`answer_${answer.answerID}` } className=\"asterisk_input\" name=\"answer\" type=\"text\" onChange={(e) => handleAnswerChanged(answer.answerID, e.target.value)} placeholder={`Answer #${answer.answerID}`} required/> \r\n                  <input id={`radio_${answer.answerID}`  } name={questionTypes ? (questionType === questionTypes[0] ? questionType : \"\") : \"default\"} type=\"radio\" onClick={(e) => handleAnswerClick(answer.answerID)} /> \r\n                  <label id={`label_${answer.answerID}`  } htmlFor={`radio_${answer.answerID}`}   >  {answer.correct === true ? \"Correct\" : \"Incorrect\"}  </label>\r\n                </td>\r\n              </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n\r\n          <div className=\"answer_layout__container\">\r\n            <label name=\"layout__label\"> Answers layout: </label>\r\n            <input id=\"vertical\"    type=\"radio\"  name=\"answer_layout\"  defaultChecked onChange={(e) => handleLayoutChange(e)} />    <label htmlFor=\"vertical\"   >  Vertical   </label>\r\n            <input id=\"horizontal\"  type=\"radio\"  name=\"answer_layout\"                 onChange={(e) => handleLayoutChange(e)} />    <label htmlFor=\"horizontal\" >  Horizontal </label>\r\n            <button onClick={(e) => addAnswer(e)}> Add an Answer </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div id=\"tags__container\">\r\n          <table id=\"tags__table\">\r\n            <tbody>\r\n              <tr>\r\n                <td> <label> Tags: </label> </td>\r\n                <td> <TagsInput tags={handleTagsChange}/> </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div id=\"buttons__container\">\r\n          <button className=\"regular__button\" onClick={() => back() }> {`<<` } Back  </button>\r\n          <button className=\"regular__button\" onClick={() => show() }>  Show         </button>\r\n          <button className=\"regular__button\" type=\"submit\"          >  Save {`>>` } </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n};"]},"metadata":{},"sourceType":"module"}