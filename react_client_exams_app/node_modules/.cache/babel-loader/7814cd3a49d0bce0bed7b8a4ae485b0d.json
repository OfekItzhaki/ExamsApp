{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ofeki\\\\OneDrive\\\\\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\\\\ExamApp design ver\\\\ExamsApp\\\\react_client_exams_app\\\\src\\\\components\\\\pages\\\\Student\\\\StartPage\\\\StartPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport styles from './StartPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function StartPage() {\n  _s();\n\n  const [tests, setTests] = useState(null);\n  const [students, setStudents] = useState(null);\n  const [firstName, setFirstName] = useState(\"\");\n  const [lastName, setLastName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [link, setLink] = useState(\"\");\n  const [linkExists, setLinkExists] = useState(false);\n  const [student, setStudent] = useState(null);\n  const [test, setTest] = useState(null);\n  const location = useLocation();\n  const history = useHistory();\n\n  const handleSubmit = event => {\n    console.log(\"handle submit\");\n    event.preventDefault();\n    setTest(tests.some(test => test.link === link));\n    findStudent();\n  };\n\n  const findStudent = () => {\n    students.map(student => {\n      let fullName = `${firstName} ${lastName}`;\n      console.log(fullName);\n\n      if (fullName.toLowerCase()) {\n        console.log(\"student was found\");\n        setStudent(student);\n      } else {\n        console.log(\"student wasn't found\");\n      }\n    });\n  };\n\n  const pushHistory = () => {\n    console.log(\"push history\");\n    console.log(link);\n\n    if (student && link) {\n      console.log(\"student is defined\");\n      history.push({\n        pathname: `/student/${link}`,\n        // search: '?update=true',  // query string\n        state: {\n          // location state\n          // update: true, \n          student: {\n            studentID: student.studentID,\n            fullName: student.fullName,\n            email: email\n          },\n          test: test\n        }\n      });\n    }\n  };\n\n  const fetchStudents = () => {\n    fetch(\"http://localhost:8000/students\", {\n      method: 'GET'\n    }).then(res => res.json()).then(data => {\n      setStudents(data);\n    }).catch(err => console.log('error students:' + err));\n  };\n\n  const fetchTests = () => {\n    fetch(\"http://localhost:8000/tests\", {\n      method: 'GET'\n    }).then(res => res.json()).then(data => {\n      setTests(data);\n    }).catch(err => console.log('error fetching tests:' + err));\n  };\n\n  const checkLink = link => {\n    let exists = false;\n\n    if (tests !== null) {\n      tests.map(test => {\n        if (test.link === link) {\n          exists = true;\n        }\n      });\n      return exists;\n    }\n  }; // Meant for fetching the necessary information on first render\n\n\n  useEffect(() => {\n    document.title = \"State Test\";\n\n    if (location.state) {\n      if (location.state.link) setLink(location.state.link);\n    }\n  }, []);\n  useEffect(() => {\n    pushHistory();\n  }, [student, test]);\n  useEffect(() => {\n    if (location) {\n      if (location.pathname) {\n        // console.log(location.pathname);\n        if (checkLink(location.pathname) === false) {\n          history.push(\"/error404\");\n        } else {\n          setLink(location.pathname);\n          setLinkExists(true);\n        }\n      }\n    }\n  }, [location.pathname]); // Meant for fetching the necessary information on first render\n\n  useEffect(() => {\n    let isMounted = true; // note mutable flag\n\n    if (isMounted) {\n      // add conditional check\n      fetchTests();\n      fetchStudents();\n    }\n\n    return () => {\n      isMounted = false;\n    }; // cleanup toggles value, if unmounted\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"start_page noselect\",\n    children: linkExists && /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"start_page_content__container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \" Please complete the following form to begin: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"start_page__form\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"start_page_content__container\",\n          children: [/*#__PURE__*/_jsxDEV(\"table\", {\n            id: \"start_page__table\",\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \" First Name: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 42\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"asterisk_input\",\n                    value: firstName,\n                    type: \"text\",\n                    placeholder: \"Type something\",\n                    onChange: e => setFirstName(e.target.value),\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 42\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \" Last Name: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 42\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"asterisk_input\",\n                    value: lastName,\n                    type: \"text\",\n                    placeholder: \"Type something\",\n                    onChange: e => setLastName(e.target.value),\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 42\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \" Email: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 42\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"input\", {\n                    className: \"asterisk_input\",\n                    value: email,\n                    type: \"text\",\n                    placeholder: \"Type something\",\n                    onChange: e => setEmail(e.target.value),\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 42\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"submit__button\",\n            type: \"submit\",\n            children: \" Submit \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 9\n  }, this);\n}\n\n_s(StartPage, \"R+KiGBuFzpibCluYSZHvQX7uPEU=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = StartPage;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"StartPage\");","map":{"version":3,"sources":["C:/Users/ofeki/OneDrive/שולחן העבודה/ExamApp design ver/ExamsApp/react_client_exams_app/src/components/pages/Student/StartPage/StartPage.js"],"names":["React","useEffect","useState","useHistory","useLocation","styles","StartPage","tests","setTests","students","setStudents","firstName","setFirstName","lastName","setLastName","email","setEmail","link","setLink","linkExists","setLinkExists","student","setStudent","test","setTest","location","history","handleSubmit","event","console","log","preventDefault","some","findStudent","map","fullName","toLowerCase","pushHistory","push","pathname","state","studentID","fetchStudents","fetch","method","then","res","json","data","catch","err","fetchTests","checkLink","exists","document","title","isMounted","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect,  useState        }   from 'react';\r\nimport        { useHistory, useLocation     }   from 'react-router-dom';\r\nimport styles                                   from './StartPage.css';\r\n\r\nexport default function StartPage() {\r\n\r\n    const [ tests,          setTests            ] = useState(null);\r\n    const [ students,       setStudents         ] = useState(null);\r\n\r\n    const [ firstName,      setFirstName        ] = useState(\"\");\r\n    const [ lastName,       setLastName         ] = useState(\"\");\r\n    const [ email,          setEmail            ] = useState(\"\");\r\n\r\n    const [ link,           setLink             ] = useState(\"\");\r\n    const [ linkExists,     setLinkExists       ] = useState(false);\r\n\r\n    const [ student,        setStudent          ] = useState(null);\r\n    const [ test,           setTest             ] = useState(null);\r\n\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n\r\n    const handleSubmit = (event) => {\r\n        console.log(\"handle submit\");\r\n        event.preventDefault();\r\n\r\n        setTest(tests.some((test) => test.link === link));\r\n        findStudent();\r\n    }\r\n\r\n    const findStudent = () => {\r\n        students.map((student) => {\r\n            let fullName = (`${firstName} ${lastName}`);\r\n            console.log(fullName);\r\n            if (fullName.toLowerCase()) {\r\n                console.log(\"student was found\");\r\n                setStudent(student);\r\n            } else {\r\n                console.log(\"student wasn't found\");\r\n            }\r\n        })\r\n    }\r\n\r\n    const pushHistory = () => {\r\n\r\n        console.log(\"push history\")\r\n        console.log(link);\r\n        if (student && link) {\r\n            console.log(\"student is defined\")\r\n\r\n            history.push({\r\n                pathname: `/student/${link}`,\r\n                // search: '?update=true',  // query string\r\n                state: {  // location state\r\n                    // update: true, \r\n                    student: {\r\n                        studentID: student.studentID,\r\n                        fullName: student.fullName,\r\n                        email: email\r\n                    },\r\n                    test: test\r\n                },\r\n            });\r\n        }\r\n    }\r\n\r\n    const fetchStudents = () => {\r\n        fetch(\"http://localhost:8000/students\", {\r\n            method: 'GET',\r\n          })\r\n          .then((res) => res.json())\r\n          .then((data) => { \r\n            setStudents(data); \r\n          })\r\n          .catch((err) => console.log('error students:' + err))\r\n    }\r\n\r\n    const fetchTests = () => {\r\n        fetch(\"http://localhost:8000/tests\", {\r\n          method: 'GET',\r\n        })\r\n        .then((res) => res.json())\r\n        .then((data) => { \r\n          setTests(data); \r\n        })\r\n        .catch((err) => console.log('error fetching tests:' + err))\r\n    }\r\n\r\n    const checkLink = (link) => {\r\n        let exists = false;\r\n\r\n        if (tests !== null) {\r\n            tests.map((test) => {\r\n                if (test.link === link) {\r\n                    exists = true;\r\n                }\r\n            })\r\n            \r\n            return exists;\r\n        }\r\n    }\r\n\r\n    // Meant for fetching the necessary information on first render\r\n    useEffect(() => {\r\n        document.title = \"State Test\";\r\n\r\n        if (location.state) {\r\n            if (location.state.link) setLink(location.state.link);\r\n        }\r\n\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n\r\n        pushHistory();\r\n\r\n    }, [student, test])\r\n\r\n    useEffect(() => {\r\n        if (location) {\r\n            if (location.pathname) {\r\n                // console.log(location.pathname);\r\n\r\n                if (checkLink(location.pathname) === false) { \r\n                    history.push(\"/error404\");\r\n                } else {\r\n                    setLink(location.pathname);\r\n                    setLinkExists(true);\r\n                }\r\n            }\r\n        }\r\n\r\n    }, [location.pathname])\r\n\r\n      // Meant for fetching the necessary information on first render\r\n  useEffect(() => {\r\n    let isMounted = true;           // note mutable flag\r\n\r\n    if (isMounted) {                // add conditional check\r\n        fetchTests();\r\n        fetchStudents();\r\n    }\r\n\r\n    return () => { isMounted = false }; // cleanup toggles value, if unmounted\r\n  }, [])\r\n\r\n    return (\r\n        <div className=\"start_page noselect\">\r\n            { linkExists && <div id=\"start_page_content__container\">\r\n                <label> Please complete the following form to begin: </label>\r\n                <form id=\"start_page__form\" onSubmit={handleSubmit}>\r\n                    <div id=\"start_page_content__container\">\r\n                        <table id=\"start_page__table\">\r\n                            <tbody>\r\n                                <tr>\r\n                                    <td> <label> First Name: </label> </td>\r\n                                    <td> <input className=\"asterisk_input\" value={firstName}    type=\"text\" placeholder=\"Type something\"    onChange={(e) => setFirstName(e.target.value)}  required/> </td>\r\n                                </tr>\r\n\r\n                                <tr>\r\n                                    <td> <label> Last Name: </label> </td>\r\n                                    <td> <input className=\"asterisk_input\" value={lastName}     type=\"text\" placeholder=\"Type something\"    onChange={(e) => setLastName(e.target.value)}   required/> </td>\r\n                                </tr>\r\n\r\n                                <tr>\r\n                                    <td> <label> Email: </label> </td>\r\n                                    <td> <input className=\"asterisk_input\" value={email}        type=\"text\" placeholder=\"Type something\"    onChange={(e) => setEmail(e.target.value)}      required/> </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n\r\n                        <button id=\"submit__button\" type=\"submit\"> Submit </button>\r\n                    </div>\r\n                </form>\r\n            </div> }\r\n        </div>\r\n    )\r\n};\r\n"]},"metadata":{},"sourceType":"module"}